
(function(win, input){

	function base64_decode(s){
		// for modern browsers
		// TODO: test the worst case (i.e. the custom code) if we are requesting this with phantomJS for testing
		if( win.atob ) return win.atob(s);
		// for IE and some mobile ones
		var out = "",
			chr1, chr2, chr3,
			enc1, enc2, enc3, enc4,
			i,len=s.length, iO='indexOf',cA='charAt', fCC=String.fromCharCode,
			lut = "ABCDEFGHIJKLMNOP" +
			      "QRSTUVWXYZabcdef" +
			      "ghijklmnopqrstuv" +
			      "wxyz0123456789+/" +
			      "=";
		for(i=0;i<len;){
			// get the encoded bytes
			enc1 = lut[iO](s[cA](i++));
			enc2 = lut[iO](s[cA](i++));
			enc3 = lut[iO](s[cA](i++));
			enc4 = lut[iO](s[cA](i++));
			// turn them into chars
			chr1 = (enc1 << 2) | (enc2 >> 4);
			chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
			chr3 = ((enc3 & 3) << 6) | enc4;
			out += fCC(chr1);
			if (enc3 != 64) {
				out += fCC(chr2);
			}
			if (enc4 != 64) {
				out += fCC(chr3);
			}
		}
		return out;
	}
	/**
	 * Load a script in HEAD
	 *
	 * pass either uri or inner. one will set the SRC the other the .text
	 */
	function loadScript(uri, inner, sf) {
		var h = document.getElementsByTagName('head')[0] || document.documentElement,
			s = document.createElement('script');
		if( !sf ){
			s.type = 'text/javascript';
		}else{
			s.type = 'text/x-safeframe';
		}
		if( inner ){
			s.text = inner;
		}else{
			s.src = uri;
		}
		return h.appendChild(s);
	}

	/* TODO: pass input as plain JSON, not a string... and then assign it to
	 * win.DARLA_CONFIG=input;
	 * and call a new public method that will parse the positions list (currently inline-code in boot.js:_get_tags()
	*/
	loadScript( false, base64_decode(input), true );
	loadScript( "https://s.yimg.com/rq/darla/boot.js", false, false);

}(window, "eyJwb3NpdGlvbnMiOlt7ImlkIjoiUklDSCIsImh0bWwiOiI8c2NyaXB0IHR5cGU9J3RleHRcL2phdmFzY3JpcHQnPmRvY3VtZW50LndyaXRlKCc8YSBocmVmPVwiaHR0cHM6XC9cL2dxLnVzLnkuYXR3b2xhLmNvbVwvYWRsaW5rfDUxMTMuMXw1MDY2OTc3fDB8MHxBZElkPS00MDtCbklkPTA7Z3VpZD02M3U0OHZsZ2FxMXBoJmI9MyZzPTk5O2l0aW1lPTEwODg5NTkzMDtrdnNlY3VyZSUyRGRhcmxhPTQlMkQ4JTJEMCU3Q3lzZCU3QzI7a3ZzZWN1cmU9dHJ1ZTtrdm1uPXk5NjM4OTc3NjE7a3Z5JTJEYnVja2V0PW1iciUyRGhhcm1vbnklMkRzaWduJTJEaW4lMkNtYnIlMkRoYXJtb255JTJEc2lnbiUyRHVwJTJDbWVzc2VuZ2VyJTJEdHJ1c3RlZCUyRGFyJTJEdjIlMkNtYnIlMkRhciUyRHB1c2glMkR1eCUyQ21iciUyRHFyJTJEY29tZXQlMkRzZGslMkM7a3ZwZ2NvbG89Z3ExO2t2c3NwPXNzcDtrdmFkdGMlNUZkdm1rdG5hbWU9dW5rbm93bjtrdmFkdGMlNUZkdm9zcGx0PXdpbmRvd3MlNUYxMDtrdmFkdGMlNUZkdmJyYW5kPW1vemlsbGE7a3ZhZHRjJTVGZHZ0eXBlPWRlc2t0b3A7a3ZhZHRjJTVGZHZtb2RlbD1maXJlZm94JTVGJTJEJTVGd2luZG93cztrdnJlcG8lNUZkdm9zcGx0PXdpbmRvd3MlNUYxMDtrdmFkdGMlNUZkdm9zdmVyc2lvbj1OVCUyMDEwJTJFMDtrdmFkdGMlNUZjcm1jYz1VTktOT1dOO2t2YWR0YyU1RmNybW5jPVVOS05PV047Z2Rwcj0wO2FkY2xudGlkPTEwMDQ7c3BhY2VpZD03OTQyMDAwMzM7XCIgdGFyZ2V0PV90b3A+PGltZyBzcmM9XCJodHRwczpcL1wvYWthLWNkbi5hZHRlY2h1cy5jb21cL2ltYWdlc1wvQVRDb2xsYXBzZS5naWZcIiBib3JkZXI9MCBhbHQ9XCJBT0wgQWRcIiB3aWR0aD1cIjFcIiBoZWlnaHQ9XCIxXCIgPjxcL2E+Jyk7XG4gIFxuPFwvc2NyaXB0PiIsImxvd0hUTUwiOiIiLCJtZXRhIjp7InkiOnsicG9zIjoiUklDSCIsImNzY0hUTUwiOiI8aW1nIHdpZHRoPTEgaGVpZ2h0PTEgYWx0PVwiXCIgc3JjPVwiaHR0cHM6XC9cLzExLmF0LmF0d29sYS5jb21cL2FkY291bnR8Mi4wfDUxMTMuMXw1MDY2OTc3fDB8MHxBZElkPS00MDtCbklkPTA7Y3Q9MjgyNjg3NDE3NztzdD01MjUxO2FkY2lkPTA7aXRpbWU9MTA4ODk1OTMwO3JlcXR5cGU9NTtndWlkPTYzdTQ4dmxnYXExcGgmYj0zJnM9OTk7O2ltcHJlZj0xNjIyMTA4ODk1MjIxNTY5MjkyMDtpbXByZWZzZXE9MjA5MTQ4MDM2ODM0NjcxMzQ1O2ltcHJlZnRzPTE2MjIxMDg4OTU7YWRjbG50aWQ9MTAwNDtzcGFjZWlkPTc5NDIwMDAzMzthZHBvc2l0aW9uPVJJQ0g7bG1zaWQ9O3JldnNoYXJlPTtwdmlkPVpKUHUzekV3TGpKaC5JajlZSzBITVFJRU1qQTVMZ0FBQUFDb2ZqNm87c2VjdGlvbmlkPTtrdnNlY3VyZSUyRGRhcmxhPTQlMkQ4JTJEMCU3Q3lzZCU3QzI7a3ZzZWN1cmU9dHJ1ZTtrdm1uPXk5NjM4OTc3NjE7a3Z5JTJEYnVja2V0PW1iciUyRGhhcm1vbnklMkRzaWduJTJEaW4lMkNtYnIlMkRoYXJtb255JTJEc2lnbiUyRHVwJTJDbWVzc2VuZ2VyJTJEdHJ1c3RlZCUyRGFyJTJEdjIlMkNtYnIlMkRhciUyRHB1c2glMkR1eCUyQ21iciUyRHFyJTJEY29tZXQlMkRzZGslMkM7a3ZwZ2NvbG89Z3ExO2t2c3NwPXNzcDtrdmFkdGMlNUZkdm1rdG5hbWU9dW5rbm93bjtrdmFkdGMlNUZkdm9zcGx0PXdpbmRvd3MlNUYxMDtrdmFkdGMlNUZkdmJyYW5kPW1vemlsbGE7a3ZhZHRjJTVGZHZ0eXBlPWRlc2t0b3A7a3ZhZHRjJTVGZHZtb2RlbD1maXJlZm94JTVGJTJEJTVGd2luZG93cztrdnJlcG8lNUZkdm9zcGx0PXdpbmRvd3MlNUYxMDtrdmFkdGMlNUZkdm9zdmVyc2lvbj1OVCUyMDEwJTJFMDtrdmFkdGMlNUZjcm1jYz1VTktOT1dOO2t2YWR0YyU1RmNybW5jPVVOS05PV047Z2Rwcj0wO1wiPiIsImNzY1VSSSI6Imh0dHBzOlwvXC8xMS5hdC5hdHdvbGEuY29tXC9hZGNvdW50fDIuMHw1MTEzLjF8NTA2Njk3N3wwfDB8QWRJZD0tNDA7Qm5JZD0wO2N0PTI4MjY4NzQxNzc7c3Q9NTI1MTthZGNpZD0wO2l0aW1lPTEwODg5NTkzMDtyZXF0eXBlPTU7Z3VpZD02M3U0OHZsZ2FxMXBoJmI9MyZzPTk5OztpbXByZWY9MTYyMjEwODg5NTIyMTU2OTI5MjA7aW1wcmVmc2VxPTIwOTE0ODAzNjgzNDY3MTM0NTtpbXByZWZ0cz0xNjIyMTA4ODk1O2FkY2xudGlkPTEwMDQ7c3BhY2VpZD03OTQyMDAwMzM7YWRwb3NpdGlvbj1SSUNIO2xtc2lkPTtyZXZzaGFyZT07cHZpZD1aSlB1M3pFd0xqSmguSWo5WUswSE1RSUVNakE1TGdBQUFBQ29majZvO3NlY3Rpb25pZD07a3ZzZWN1cmUlMkRkYXJsYT00JTJEOCUyRDAlN0N5c2QlN0MyO2t2c2VjdXJlPXRydWU7a3Ztbj15OTYzODk3NzYxO2t2eSUyRGJ1Y2tldD1tYnIlMkRoYXJtb255JTJEc2lnbiUyRGluJTJDbWJyJTJEaGFybW9ueSUyRHNpZ24lMkR1cCUyQ21lc3NlbmdlciUyRHRydXN0ZWQlMkRhciUyRHYyJTJDbWJyJTJEYXIlMkRwdXNoJTJEdXglMkNtYnIlMkRxciUyRGNvbWV0JTJEc2RrJTJDO2t2cGdjb2xvPWdxMTtrdnNzcD1zc3A7a3ZhZHRjJTVGZHZta3RuYW1lPXVua25vd247a3ZhZHRjJTVGZHZvc3BsdD13aW5kb3dzJTVGMTA7a3ZhZHRjJTVGZHZicmFuZD1tb3ppbGxhO2t2YWR0YyU1RmR2dHlwZT1kZXNrdG9wO2t2YWR0YyU1RmR2bW9kZWw9ZmlyZWZveCU1RiUyRCU1RndpbmRvd3M7a3ZyZXBvJTVGZHZvc3BsdD13aW5kb3dzJTVGMTA7a3ZhZHRjJTVGZHZvc3ZlcnNpb249TlQlMjAxMCUyRTA7a3ZhZHRjJTVGY3JtY2M9VU5LTk9XTjtrdmFkdGMlNUZjcm1uYz1VTktOT1dOO2dkcHI9MDsiLCJiZWhhdmlvciI6Im5vbl9leHAiLCJhZElEIjoiIzEiLCJtYXRjaElEIjoiOTk5OTk5Ljk5OTk5OS45OTk5OTkuOTk5OTk5IiwiYm9va0lEIjoiIiwic2xvdElEIjoiMCIsInNlcnZlVHlwZSI6IjYiLCJ0dGwiOi0xLCJlcnIiOiJub2FkIiwiaGFzRXh0ZXJuYWwiOmZhbHNlLCJzdXBwX3VnYyI6IjAiLCJwbGFjZW1lbnRJRCI6LTEsImZkYiI6bnVsbCwic2VydmVUaW1lIjotMSwiaW1wSUQiOiIiLCJjcmVhdGl2ZUlEIjotMSwiYWRjIjoie1wibGFiZWxcIjpcIkFkQ2hvaWNlc1wiLFwidXJsXCI6XCJodHRwczpcXFwvXFxcL2luZm8ueWFob28uY29tXFxcL3ByaXZhY3lcXFwvdXNcXFwveWFob29cXFwvcmVsZXZhbnRhZHMuaHRtbFwiLFwiY2xvc2VcIjpcIkNsb3NlXCIsXCJjbG9zZUFkXCI6XCJDbG9zZSBBZFwiLFwic2hvd0FkXCI6XCJTaG93IGFkXCIsXCJjb2xsYXBzZVwiOlwiQ29sbGFwc2VcIixcImZkYlwiOlwiSSBkb24ndCBsaWtlIHRoaXMgYWRcIixcImNvZGVcIjpcImVuLXVzXCJ9IiwiaXMzcmQiOjEsImZhY1N0YXR1cyI6eyJmZWRTdGF0dXNDb2RlIjoiMzEiLCJmZWRTdGF0dXNNZXNzYWdlIjoiWWllbGQgb3B0aW1pemF0aW9uIGRpZCBub3QgcnVuIn0sInVzZXJQcm92aWRlZERhdGEiOnt9LCJmYWNSb3RhdGlvbiI6e30sInNsb3REYXRhIjp7fSwic2l6ZSI6IjF4MSJ9fSwiY29uZiI6eyJ3IjoxLCJoIjoxfX1dLCJjb25mIjp7InVzZVlBQyI6MCwidXNlUEUiOjEsInNlcnZpY2VQYXRoIjoiIiwieHNlcnZpY2VQYXRoIjoiIiwiYmVhY29uUGF0aCI6IiIsInJlbmRlclBhdGgiOiIiLCJhbGxvd0ZpRiI6ZmFsc2UsInNyZW5kZXJQYXRoIjoiaHR0cHM6XC9cL3MueWltZy5jb21cL3JxXC9kYXJsYVwvNC04LTBcL2h0bWxcL3Itc2YuaHRtbCIsInJlbmRlckZpbGUiOiJodHRwczpcL1wvcy55aW1nLmNvbVwvcnFcL2RhcmxhXC80LTgtMFwvaHRtbFwvci1zZi5odG1sIiwic2ZicmVuZGVyUGF0aCI6Imh0dHBzOlwvXC9zLnlpbWcuY29tXC9ycVwvZGFybGFcLzQtOC0wXC9odG1sXC9yLXNmLmh0bWwiLCJtc2dQYXRoIjoiaHR0cHM6XC9cL2ZjLnlhaG9vLmNvbVwvdW5zdXBwb3J0ZWQtMTk0Ni5odG1sIiwiY3NjUGF0aCI6Imh0dHBzOlwvXC9zLnlpbWcuY29tXC9ycVwvZGFybGFcLzQtOC0wXC9odG1sXC9yLWNzYy5odG1sIiwicm9vdCI6InNkYXJsYSIsImVkZ2VSb290IjoiaHR0cHM6XC9cL3MueWltZy5jb21cL3JxXC9kYXJsYVwvNC04LTAiLCJzZWRnZVJvb3QiOiJodHRwczpcL1wvcy55aW1nLmNvbVwvcnFcL2RhcmxhXC80LTgtMCIsInZlcnNpb24iOiI0LTgtMCIsInRwYlVSSSI6IiIsImhvc3RGaWxlIjoiaHR0cHM6XC9cL3MueWltZy5jb21cL3JxXC9kYXJsYVwvNC04LTBcL2pzXC9nLXItbWluLmpzIiwiZmRiX2xvY2FsZSI6IldoYXQgZG9uJ3QgeW91IGxpa2UgYWJvdXQgdGhpcyBhZD98SXQncyBvZmZlbnNpdmV8U29tZXRoaW5nIGVsc2V8VGhhbmsgeW91IGZvciBoZWxwaW5nIHVzIGltcHJvdmUgeW91ciBZYWhvbyBleHBlcmllbmNlfEl0J3Mgbm90IHJlbGV2YW50fEl0J3MgZGlzdHJhY3Rpbmd8SSBkb24ndCBsaWtlIHRoaXMgYWR8U2VuZHxEb25lfFdoeSBkbyBJIHNlZSBhZHM/fExlYXJuIG1vcmUgYWJvdXQgeW91ciBmZWVkYmFjay58V2FudCBhbiBhZC1mcmVlIGluYm94PyBVcGdyYWRlIHRvIFlhaG9vIE1haWwgUHJvIXxVcGdyYWRlIE5vdyIsInBvc2l0aW9ucyI6eyJSSUNIIjp7ImRlc3QiOiJ0Z3RSSUNIIiwiYXN6IjoiZmxleCIsImlkIjoiUklDSCIsInciOjEsImgiOjF9fSwicHJvcGVydHkiOiIiLCJldmVudHMiOltdLCJsYW5nIjoiZW4tdXMiLCJzcGFjZUlEIjoiNzk0MjAwMDMzIiwiZGVidWciOmZhbHNlLCJhc1N0cmluZyI6IntcInVzZVlBQ1wiOjAsXCJ1c2VQRVwiOjEsXCJzZXJ2aWNlUGF0aFwiOlwiXCIsXCJ4c2VydmljZVBhdGhcIjpcIlwiLFwiYmVhY29uUGF0aFwiOlwiXCIsXCJyZW5kZXJQYXRoXCI6XCJcIixcImFsbG93RmlGXCI6ZmFsc2UsXCJzcmVuZGVyUGF0aFwiOlwiaHR0cHM6XFxcL1xcXC9zLnlpbWcuY29tXFxcL3JxXFxcL2RhcmxhXFxcLzQtOC0wXFxcL2h0bWxcXFwvci1zZi5odG1sXCIsXCJyZW5kZXJGaWxlXCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC04LTBcXFwvaHRtbFxcXC9yLXNmLmh0bWxcIixcInNmYnJlbmRlclBhdGhcIjpcImh0dHBzOlxcXC9cXFwvcy55aW1nLmNvbVxcXC9ycVxcXC9kYXJsYVxcXC80LTgtMFxcXC9odG1sXFxcL3Itc2YuaHRtbFwiLFwibXNnUGF0aFwiOlwiaHR0cHM6XFxcL1xcXC9mYy55YWhvby5jb21cXFwvdW5zdXBwb3J0ZWQtMTk0Ni5odG1sXCIsXCJjc2NQYXRoXCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC04LTBcXFwvaHRtbFxcXC9yLWNzYy5odG1sXCIsXCJyb290XCI6XCJzZGFybGFcIixcImVkZ2VSb290XCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC04LTBcIixcInNlZGdlUm9vdFwiOlwiaHR0cHM6XFxcL1xcXC9zLnlpbWcuY29tXFxcL3JxXFxcL2RhcmxhXFxcLzQtOC0wXCIsXCJ2ZXJzaW9uXCI6XCI0LTgtMFwiLFwidHBiVVJJXCI6XCJcIixcImhvc3RGaWxlXCI6XCJodHRwczpcXFwvXFxcL3MueWltZy5jb21cXFwvcnFcXFwvZGFybGFcXFwvNC04LTBcXFwvanNcXFwvZy1yLW1pbi5qc1wiLFwiZmRiX2xvY2FsZVwiOlwiV2hhdCBkb24ndCB5b3UgbGlrZSBhYm91dCB0aGlzIGFkP3xJdCdzIG9mZmVuc2l2ZXxTb21ldGhpbmcgZWxzZXxUaGFuayB5b3UgZm9yIGhlbHBpbmcgdXMgaW1wcm92ZSB5b3VyIFlhaG9vIGV4cGVyaWVuY2V8SXQncyBub3QgcmVsZXZhbnR8SXQncyBkaXN0cmFjdGluZ3xJIGRvbid0IGxpa2UgdGhpcyBhZHxTZW5kfERvbmV8V2h5IGRvIEkgc2VlIGFkcz98TGVhcm4gbW9yZSBhYm91dCB5b3VyIGZlZWRiYWNrLnxXYW50IGFuIGFkLWZyZWUgaW5ib3g/IFVwZ3JhZGUgdG8gWWFob28gTWFpbCBQcm8hfFVwZ3JhZGUgTm93XCIsXCJwb3NpdGlvbnNcIjp7XCJSSUNIXCI6e1wiZGVzdFwiOlwidGd0UklDSFwiLFwiYXN6XCI6XCJmbGV4XCIsXCJpZFwiOlwiUklDSFwiLFwid1wiOjEsXCJoXCI6MX19LFwicHJvcGVydHlcIjpcIlwiLFwiZXZlbnRzXCI6W10sXCJsYW5nXCI6XCJlbi11c1wiLFwic3BhY2VJRFwiOlwiNzk0MjAwMDMzXCIsXCJkZWJ1Z1wiOmZhbHNlfSJ9LCJtZXRhIjp7InkiOnsicGFnZUVuZEhUTUwiOiI8IS0tIFBhZ2UgRW5kIEhUTUwgLS0+PHNjcmlwdD4oZnVuY3Rpb24oZCl7dmFyIGE9ZC5ib2R5LmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJykpLGI9YS5jb250ZW50V2luZG93LmRvY3VtZW50O2Euc3R5bGUuY3NzVGV4dD0naGVpZ2h0OjA7d2lkdGg6MDtmcmFtZWJvcmRlcjpubztzY3JvbGxpbmc6bm87c2FuZGJveDphbGxvdy1zY3JpcHRzO2Rpc3BsYXk6bm9uZTsnO2Iub3BlbigpLndyaXRlKCc8Ym9keSBvbmxvYWQ9XCJ2YXIgZD1kb2N1bWVudDtkLmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcJ2hlYWRcXCcpWzBdLmFwcGVuZENoaWxkKGQuY3JlYXRlRWxlbWVudChcXCdzY3JpcHRcXCcpKS5zcmM9XFwnaHR0cHM6XFxcL1xcXC9zLnlpbWcuY29tXFxcL3JxXFxcL3Nib3hcXFwvYnYuanNcXCdcIj4nKTtiLmNsb3NlKCk7fSkoZG9jdW1lbnQpOzxcL3NjcmlwdD4iLCJwb3NfbGlzdCI6WyJSSUNIIl0sInRyYW5zSUQiOiJkYXJsYV9wcmVmZXRjaF8xNjIyMTA4ODk1MzQ0Xzk2OTk0MjI5MV8zIiwiazJfdXJpIjoiIiwiZmFjX3J0IjotMSwidHRsIjotMSwic3BhY2VJRCI6Ijc5NDIwMDAzMyIsImxvb2t1cFRpbWUiOjM1LCJwcm9jVGltZSI6MzUsIm5wdiI6MCwicHZpZCI6IlpKUHUzekV3TGpKaC5JajlZSzBITVFJRU1qQTVMZ0FBQUFDb2ZqNm8iLCJzZXJ2ZVRpbWUiOi0xLCJlcCI6eyJzaXRlLWF0dHJpYnV0ZSI6ImdlbWluaWZlZD0xIHktYnVja2V0PW1ici1oYXJtb255LXNpZ24taW4sbWJyLWhhcm1vbnktc2lnbi11cCxtZXNzZW5nZXItdHJ1c3RlZC1hci12MixtYnItYXItcHVzaC11eCxtYnItcXItY29tZXQtc2RrLG1lc3Nlbmdlci11bnRydXN0ZWQtYXItdjIiLCJ0Z3QiOiJfYmxhbmsiLCJzZWN1cmUiOnRydWUsInJlZiI6Imh0dHBzOlwvXC9sb2dpbi5hb2wuY29tXC8iLCJmaWx0ZXIiOiJub19leHBhbmRhYmxlO2V4cF9pZnJhbWVfZXhwYW5kYWJsZTsiLCJkYXJsYUlEIjoiZGFybGFfaW5zdGFuY2VfMTYyMjEwODg5NTM0NF8xNTY2NjY0ODI1XzIifSwicHltIjp7Ii4iOiJ2MC4wLjk7Oy07In0sImhvc3QiOiIiLCJmaWx0ZXJlZCI6W10sInBlIjoiIn19fQ=="));

